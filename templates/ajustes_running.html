<!DOCTYPE html>       
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ajustes de Ritmo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fuente Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* Estilos resumidos */
    * {
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background: #000;
      color: #fff;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
    }
    .logo {
      width: 200px;
      margin: 20px 0;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .logo:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 15px rgba(255,204,0,0.7);
    }
    /* Contenedor principal */
    .container {
      position: relative;
      width: 90%;
      max-width: 800px;
      background: linear-gradient(145deg, #222, #111);
      text-align: center;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0px 4px 20px rgba(255,204,0,0.3);
      border: 2px solid #ffcc00;
      margin-bottom: 20px;
    }
    h1 {
      color: #ffcc00;
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 20px;
    }
    label {
      color: #bbb;
      font-weight: 600;
      display: block;
      margin-top: 10px;
      margin-bottom: 5px;
      text-align: center;
    }
    select, input[type="text"] {
      width: 80%;
      padding: 8px;
      border-radius: 10px;
      border: none;
      background: #1a1a1a;
      color: #fff;
      box-shadow: inset 4px 4px 8px rgba(0,0,0,0.5),
                  inset -4px -4px 8px rgba(255,255,255,0.1);
      text-align: center;
      outline: none;
      margin-bottom: 10px;
    }
    select:focus, input[type="text"]:focus {
      border: 1px solid #ffd966;
      box-shadow: 0 0 8px rgba(255,204,0,0.5);
    }
    /* ============================
       Estilos del Slider
    ============================ */
    #sliderValue {
      color: #ffcc00;
      font-weight: 600;
      margin-bottom: 5px;
      display: block;
      text-align: center;
      font-size: 1em;
    }
    #timeSlider,
    #elevationSlider {
      -webkit-appearance: none;
      width: 80%;
      background: transparent;
      margin: 10px 0;
      cursor: pointer;
    }
    /* Track para WebKit */
    #timeSlider::-webkit-slider-runnable-track,
    #elevationSlider::-webkit-slider-runnable-track {
      height: 8px;
      background: #ffcc00;
      border-radius: 5px;
    }
    /* Thumb para WebKit */
    #timeSlider::-webkit-slider-thumb,
    #elevationSlider::-webkit-slider-thumb {
      -webkit-appearance: none;
      height: 20px;
      width: 20px;
      background: #4f4108;
      border: 2px solid #ffe066;
      border-radius: 50%;
      margin-top: -6px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
    }
    #timeSlider::-webkit-slider-thumb:hover,
    #elevationSlider::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      box-shadow: 0 6px 12px rgba(0,0,0,0.6),
                  inset 0 -6px 12px rgba(255,255,255,0.5);
    }
    /* Track para Firefox */
    #timeSlider::-moz-range-track,
    #elevationSlider::-moz-range-track {
      height: 8px;
      background: #ffcc00;
      border-radius: 5px;
    }
    /* Thumb para Firefox */
    #timeSlider::-moz-range-thumb,
    #elevationSlider::-moz-range-thumb {
      height: 20px;
      width: 20px;
      background: #ffcc00;
      border: 2px solid #ffe066;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
    }
    #timeSlider::-moz-range-thumb:hover,
    #elevationSlider::-moz-range-thumb:hover {
      transform: scale(1.2);
      box-shadow: 0 6px 12px rgba(0,0,0,0.6),
                  inset 0 -6px 12px rgba(255,255,255,0.5);
    }
    /* Estilos para IE y Edge */
    #timeSlider::-ms-track,
    #elevationSlider::-ms-track {
      height: 8px;
      background: transparent;
      border-color: transparent;
      color: transparent;
    }
    #timeSlider::-ms-fill-lower,
    #elevationSlider::-ms-fill-lower {
      background: #ffcc00;
      border-radius: 5px;
    }
    #timeSlider::-ms-fill-upper,
    #elevationSlider::-ms-fill-upper {
      background: #ffcc00;
      border-radius: 5px;
    }
    #timeSlider::-ms-thumb,
    #elevationSlider::-ms-thumb {
      height: 20px;
      width: 20px;
      background: #ffcc00;
      border: 2px solid #ffe066;
      border-radius: 50%;
      cursor: pointer;
    }
    /* ============================
       Estilos de Botones
    ============================ */
    .button-primary, .back-link {
      display: inline-block;
      padding: 12px 24px;
      background: linear-gradient(135deg, #ffcc00, #e6b800);
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      text-decoration: none;
      box-shadow: 0 4px 10px rgba(255,204,0,0.5);
      transition: all 0.3s ease-in-out;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 15px;
    }
    .button-primary:hover, .back-link:hover {
      background: linear-gradient(135deg, #ffd966, #e6c300);
      box-shadow: 0 8px 15px rgba(255,204,0,0.7);
      transform: translateY(-2px);
    }
    .back-link {
      background: none;
      color: #ffcc00;
      box-shadow: none;
      font-size: 1em;
      padding: 10px 20px;
    }
    /* ============================
       Estilos para la Tabla de Resultados (estilo móvil)
    ============================ */
    table {
      width: 100%;
      margin: 20px 0;
      border-collapse: collapse;
      background: #1a1a1a;
      box-shadow: 0px 4px 10px rgba(255,204,0,0.2);
      border-radius: 10px;
      overflow: hidden;
    }
    table th, table td {
      padding: 15px;
      text-align: center;
      border-bottom: 1px solid #333;
    }
    table th {
      background-color: #ffcc00;
      color: #000;
      font-weight: 600;
    }
    table tr:hover {
      background-color: #2a2a2a;
      transition: background-color 0.3s ease;
    }
    table tbody tr:last-child td {
      border-bottom: none;
    }
    /* ============================
       Otros estilos (ayuda, imagen, etc.)
    ============================ */
    .strategy-label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      color: #bbb;
      font-weight: 600;
      margin-bottom: 5px;
    }
    .help-icon {
      width: 24px;
      height: 24px;
      background: #ffcc00;
      color: #000;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
    }
    .help-text {
      display: none;
      background: #1a1a1a;
      border: 1px solid #ffcc00;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(255,204,0,0.3);
      text-align: left;
      margin: 10px 0;
      font-size: 0.9rem;
    }
    /* ============================
       Tabla de recomendaciones de ritmo por pendiente (rangos)
    ============================ */
    #recommendationTable {
      width: 100%;
      margin: 20px 0;
      border-collapse: collapse;
      background: #1a1a1a;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(255,204,0,0.2);
    }
    #recommendationTable th, #recommendationTable td {
      padding: 10px;
      border-bottom: 1px solid #333;
      text-align: center;
    }
    #recommendationTable th {
      background-color: #ffcc00;
      color: #000;
      font-weight: 600;
    }
    #recommendationTable tr:hover {
      background-color: #2a2a2a;
      transition: background-color 0.3s;
    }
    /* ============================
       Estilos para la Tabla km a km (estilo móvil)
    ============================ */
    .km-table {
      width: 100%;
      border-collapse: collapse;
      background: #1a1a1a;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(255,204,0,0.2);
    }
    .km-table thead {
      background-color: #ffcc00;
      color: #000;
    }
    .km-table th, .km-table td {
      text-align: center;
      padding: 10px;
      border-bottom: 1px solid #333;
    }
    .km-table tbody tr:last-child td {
      border-bottom: none;
    }
    .km-table tr:hover {
      background-color: #2a2a2a;
      transition: background-color 0.3s;
    }
    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }
      h1 {
        font-size: 1.8rem;
      }
      .button-primary, .back-link {
        width: 100%;
        padding: 10px 20px;
        font-size: 0.9rem;
      }
      .help-text {
        width: 200px;
        margin-left: -100px;
      }
    }
    /* Ajustes para la imagen */
    .highlight-image {
      margin: 20px 0;
      max-width: 100%;
      width: auto;
      height: auto;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(255,204,0,0.5);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .highlight-image:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 15px rgba(255,204,0,0.7);
    }
  </style>
</head>
<body>
  <!-- Logo -->
  <img src="/static/logo fondo negro.png" alt="Logo" class="logo">
  <div class="container">
    <h1>Estrategia de Ritmo</h1>

    <!-- Inyectar datos -->
    <script>
      // Tiempos estimados (vienen de results) con factores 5:1.07,10:1.07,15:1.06,21.1:1.06,42.195:1.06
      const estimatedTimes = {{ estimated_times|tojson }};
      console.log("Datos traídos de results:", estimatedTimes);

      // Coeficiente para corrección de desnivel (para aplicar en otros cálculos)
      const ELEV_COEFF = 2.5;
    </script>

    <!-- SELECCIÓN DE DISTANCIA: PRESET -->
    <div id="distanceSelection">
      <div id="presetDistanceContainer">
        <label for="selectDistance">Distancia:</label>
        <select id="selectDistance" onchange="fillTime(); updateAll()">
          {% for dist, data in estimated_times.items() %}
          <option value="{{ dist }}">{{ dist }} km</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <!-- Tiempo final base -->
    <label>Tiempo final (HH:MM:SS):</label>
    <p id="inputTime" style="font-size:1.2rem; margin-bottom: 10px;">00:16:00</p>

    <!-- Estrategia -->
    <div class="strategy-label">
      <label for="selectStrategy">Estrategias de Ritmo:</label>
      <div class="help-icon" onclick="toggleHelpText()">?</div>
    </div>
    <div id="helpText" class="help-text">
      <p><strong>Estrategia Negativa (-1%, -2%, -3%):</strong><br>
         Comenzar más lento que el ritmo objetivo y terminar más rápido.</p>
      <p><strong>Estrategia Positiva (+1%, +2%, +3%):</strong><br>
         Comenzar más rápido y terminar más lento.</p>
      <p><strong>Estrategia Neutra:</strong><br>
         Ritmo constante en toda la prueba.</p>
    </div>
    <select id="selectStrategy" onchange="updateAll()">
      <option value="estable">Ritmo Estable</option>
      <option value="pos1">1% Positiva</option>
      <option value="pos2">2% Positiva</option>
      <option value="pos3">3% Positiva</option>
      <option value="neg1">1% Negativa</option>
      <option value="neg2">2% Negativa</option>
      <option value="neg3">3% Negativa</option>
    </select>

    <!-- Slider de ajuste de tiempo -->
    <label for="timeSlider">Ajuste del tiempo (±10%):</label>
    <span id="sliderValue">0%</span>
    <input type="range" id="timeSlider" min="0.9" max="1.1" step="0.01" value="1.0" oninput="updateAll()">

    <!-- Slider de desnivel acumulado -->
    <label for="elevationSlider">Desnivel Acumulado (m): <span id="elevationValue">0</span> m</label>
    <input type="range" id="elevationSlider" min="0" max="1000" step="1" value="0" oninput="updateElevation()">

    <!-- Tabla principal -->
    <table>
      <tbody>
        <tr>
          <td><strong>Tiempo Final Base:</strong></td>
          <td id="baseTime">--:--:--</td>
        </tr>
        <tr>
          <td><strong>Ritmo Base (mm:ss/km):</strong></td>
          <td id="basePace">--:--</td>
        </tr>
        <tr>
          <td><strong>Tiempo Final Ajustado:</strong></td>
          <td id="adjustedTime">--:--:--</td>
        </tr>
        <tr>
          <td><strong>Ritmo Ajustado (mm:ss/km):</strong></td>
          <td id="adjustedPace">--:--</td>
        </tr>
      </tbody>
    </table>

    <!-- Tabla de recomendaciones de ritmo por rango de pendiente -->
    <table id="recommendationTable">
      <thead>
        <tr>
          <th>Pendiente</th>
          <th>Ritmo Recomendado (mm:ss/km)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Tabla de splits (km a km) -->
    <table class="km-table" id="kmTable">
      <thead>
        <tr>
          <th>KM</th>
          <th>Tiempo Base</th>
          <th>Ritmo Base</th>
          <th>Tiempo Ajustado</th>
          <th>Ritmo Ajustado</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div style="text-align:center;">
    <a href="/" class="button-primary">CONTINUAR</a>
  </div>

  <!-- Botón Volver a Resultados -->
  <div style="text-align:center; margin-top: 15px;">
    <a href="{{ url_for('running') }}" class="button-primary">Volver a Calcular</a>
  </div>

  <script>
    // Evitar scroll en móvil al usar el slider
    const timeSlider = document.getElementById("timeSlider");
    timeSlider.addEventListener("touchmove", e => e.preventDefault(), { passive: false });

    function toggleHelpText() {
      const help = document.getElementById("helpText");
      help.style.display = (help.style.display === "block") ? "none" : "block";
    }

    /* 
      getAdjustmentFactor(distance):
      - Para distancias menores a 5 km se interpola linealmente desde factor 0.85 en 0 km (más rápido) hasta 1.07 en 5 km.
      - Entre 5 y 10 km se mantiene 1.07.
      - Entre 10 y 15 km se interpola de 1.07 a 1.06.
      - De 15 hasta 50 km se mantiene 1.06.
    */
    function getAdjustmentFactor(distance) {
      const thresholds = [
        { dist: 0, factor: 0.85 },
        { dist: 5, factor: 1.07 },
        { dist: 10, factor: 1.07 },
        { dist: 15, factor: 1.06 },
        { dist: 21.1, factor: 1.06 },
        { dist: 42.195, factor: 1.06 },
        { dist: 50, factor: 1.06 }
      ];
      if (distance <= thresholds[0].dist) return thresholds[0].factor;
      for (let i = 1; i < thresholds.length; i++) {
        if (distance <= thresholds[i].dist) {
          const d0 = thresholds[i - 1].dist;
          const f0 = thresholds[i - 1].factor;
          const d1 = thresholds[i].dist;
          const f1 = thresholds[i].factor;
          if (d1 === d0) return f0;
          const t = (distance - d0) / (d1 - d0);
          return f0 + t * (f1 - f0);
        }
      }
      return thresholds[thresholds.length - 1].factor;
    }

    // fillTime(): se usa la distancia preset
    function fillTime() {
      const dist = document.getElementById("selectDistance").value;
      if (estimatedTimes[dist]) {
        document.getElementById("inputTime").textContent = estimatedTimes[dist].time;
      }
    }

    function timeToSeconds(hms) {
      const parts = hms.split(":");
      const hours = parseInt(parts[0]) || 0;
      const minutes = parseInt(parts[1]) || 0;
      const seconds = parseInt(parts[2]) || 0;
      return hours * 3600 + minutes * 60 + seconds;
    }
    function secondsToHMS(sec) {
      const h = Math.floor(sec / 3600);
      const m = Math.floor((sec % 3600) / 60);
      const s = Math.floor(sec % 60);
      return String(h).padStart(2, "0") + ":" + String(m).padStart(2, "0") + ":" + String(s).padStart(2, "0");
    }
    function secondsToPaceString(sec) {
      const minutes = Math.floor(sec / 60);
      const secs = Math.floor(sec % 60);
      return String(minutes).padStart(2, "0") + ":" + String(secs).padStart(2, "0");
    }

    // updateSliderValue(): actualiza el valor del slider de ±10%
    function updateSliderValue() {
      const factor = parseFloat(document.getElementById("timeSlider").value);
      const diff = Math.round((factor - 1) * 100);
      let display = diff > 0 ? "+" + diff + "%" : diff + "%";
      if (diff === 0) display = "0%";
      document.getElementById("sliderValue").textContent = display;
    }

    // updateElevation(): actualiza el desnivel y recalcula
    function updateElevation() {
      const elev = document.getElementById("elevationSlider").value;
      document.getElementById("elevationValue").textContent = elev;
      updateAll();
    }

    // updateRecommendations(): tabla de recomendaciones de ritmo para rangos de pendiente
    function updateRecommendations(basePaceSec) {
      const ranges = [
        { min: 0, max: 2, label: "0 - 2%" },
        { min: 2, max: 4, label: "2 - 4%" },
        { min: 4, max: 6, label: "4 - 6%" },
        { min: 6, max: 8, label: "6 - 8%" },
        { min: 8, max: 10, label: "8 - 10%" },
        { min: 10, max: 11, label: "+ de 10%" }
      ];
      const tbody = document.getElementById("recommendationTable").querySelector("tbody");
      tbody.innerHTML = "";
      for (let range of ranges) {
        const minPaceSec = basePaceSec * (1 + ((range.min) / 100 * ELEV_COEFF));
        const maxPaceSec = basePaceSec * (1 + ((range.max) / 100 * ELEV_COEFF));
        const minPaceStr = secondsToPaceString(minPaceSec);
        const maxPaceStr = secondsToPaceString(maxPaceSec);
        const row = document.createElement("tr");
        row.innerHTML = `<td>${range.label}</td><td>${minPaceStr} - ${maxPaceStr}</td>`;
        tbody.appendChild(row);
      }
    }

    // updateAll(): se encarga de actualizar todos los cálculos y tablas
    function updateAll() {
      fillTime();
      updateSliderValue();

      // Obtener la distancia (siempre preset)
      let distance = parseFloat(document.getElementById("selectDistance").value);

      // Tomar el tiempo mostrado (inputTime) como tiempo base
      const userTimeStr = document.getElementById("inputTime").textContent || estimatedTimes["5"].time;
      const userTimeSec = timeToSeconds(userTimeStr);

      // Ritmo base en s/km
      const basePaceSec = userTimeSec / distance;
      document.getElementById("baseTime").textContent = userTimeStr;
      document.getElementById("basePace").textContent = secondsToPaceString(basePaceSec);

      // Factores de ajuste (±10%, estrategia, etc.)
      const factor = parseFloat(document.getElementById("timeSlider").value);
      const strategy = document.getElementById("selectStrategy").value;

      // Calcular tiempo final ajustado sin desnivel
      let totalAdjustedSec = calcTotalSeconds(distance, basePaceSec, strategy, factor);

      // Añadir corrección por desnivel
      const elev = parseFloat(document.getElementById("elevationSlider").value);
      const grade = distance > 0 ? (elev / (distance * 1000)) : 0;
      const elevFactor = 1 + (grade * ELEV_COEFF);
      totalAdjustedSec *= elevFactor;

      // Mostrar tiempo/ritmo final ajustado
      document.getElementById("adjustedTime").textContent = secondsToHMS(Math.round(totalAdjustedSec));
      document.getElementById("adjustedPace").textContent = secondsToPaceString(totalAdjustedSec / distance);

      // Actualizar la tabla de splits (base / ajustado)
      const baseSplits = buildKmSplits(distance, basePaceSec, strategy, factor, true);
      const adjSplits = buildKmSplits(distance, basePaceSec, strategy, factor * elevFactor, false);
      const tbodySplits = document.getElementById("kmTable").querySelector("tbody");
      tbodySplits.innerHTML = "";
      const maxLen = Math.max(baseSplits.length, adjSplits.length);
      for (let i = 0; i < maxLen; i++) {
        const b = baseSplits[i];
        const a = adjSplits[i];
        const kmLabel = b ? b.kmDisplay : (a ? a.kmDisplay : "");
        const baseTimeAcc = b ? b.accumulated : "";
        const basePace = b ? b.paceString : "";
        const adjTimeAcc = a ? a.accumulated : "";
        const adjPace = a ? a.paceString : "";
        const row = document.createElement("tr");
        row.innerHTML = `<td>${kmLabel}</td><td>${baseTimeAcc}</td><td>${basePace}</td><td>${adjTimeAcc}</td><td>${adjPace}</td>`;
        tbodySplits.appendChild(row);
      }

      // Actualizar recomendaciones de ritmo (pendientes)
      updateRecommendations(basePaceSec);
    }

    // Funciones de splits y cálculo
    function getSplitFactor(km, totalKm, strategy) {
      let ratio = 0;
      if (strategy === "pos1") ratio = +0.01;
      if (strategy === "pos2") ratio = +0.02;
      if (strategy === "pos3") ratio = +0.03;
      if (strategy === "neg1") ratio = -0.01;
      if (strategy === "neg2") ratio = -0.02;
      if (strategy === "neg3") ratio = -0.03;
      if (strategy === "estable") return 1.0;

      const quarter = totalKm / 4.0;
      let phaseAdjustments = [1, 1, 1, 1];

      if (strategy.startsWith("pos")) {
        const absR = Math.abs(ratio);
        phaseAdjustments = [
          1.0 - absR * 0.5,
          1.0 - absR * 0.2,
          1.0 + absR * 0.2,
          1.0 + absR * 0.5
        ];
      } else if (strategy.startsWith("neg")) {
        const absR = Math.abs(ratio);
        phaseAdjustments = [
          1.0 + absR * 0.5,
          1.0 + absR * 0.2,
          1.0 - absR * 0.2,
          1.0 - absR * 0.5
        ];
      }

      if (km > 3 * quarter) return phaseAdjustments[3];
      else if (km > 2 * quarter) return phaseAdjustments[2];
      else if (km > quarter)   return phaseAdjustments[1];
      else                     return phaseAdjustments[0];
    }

    function calcTotalSeconds(distance, basePaceSec, strategy, factor) {
      const fullKm = Math.floor(distance);
      const leftover = distance - fullKm;
      let totalSec = 0;
      for (let km = 1; km <= fullKm; km++) {
        const splitF = getSplitFactor(km, distance, strategy);
        totalSec += (basePaceSec * factor) * splitF;
      }
      if (leftover > 0) {
        const partialIndex = fullKm + leftover;
        const splitF = getSplitFactor(partialIndex, distance, strategy);
        totalSec += (basePaceSec * factor) * splitF * leftover;
      }
      return totalSec;
    }

    function buildKmSplits(distance, basePaceSec, strategy, factor, isBase = false) {
      let results = [];
      let accumulated = 0;
      const fullKm = Math.floor(distance);
      const leftover = distance - fullKm;
      for (let km = 1; km <= fullKm; km++) {
        const sFactor = isBase ? getSplitFactor(km, distance, "estable") : getSplitFactor(km, distance, strategy);
        const paceSec = (basePaceSec * (isBase ? 1 : factor)) * sFactor;
        accumulated += paceSec;
        results.push({
          kmDisplay: km.toString(),
          accumulated: secondsToHMS(Math.round(accumulated)),
          paceString: secondsToPaceString(paceSec)
        });
      }
      if (leftover > 0) {
        const partialIndex = fullKm + leftover;
        const sFactor = isBase ? getSplitFactor(partialIndex, distance, "estable") : getSplitFactor(partialIndex, distance, strategy);
        const paceSec = (basePaceSec * (isBase ? 1 : factor)) * sFactor * leftover;
        accumulated += paceSec;
        results.push({
          kmDisplay: partialIndex.toFixed(3),
          accumulated: secondsToHMS(Math.round(accumulated)),
          paceString: secondsToPaceString((basePaceSec * (isBase ? 1 : factor)) * sFactor)
        });
      }
      return results;
    }

    // Al cargar la página
    window.onload = () => {
      updateAll();
    };
  </script>
</body>
</html>



